<!-- VideoFeed -->
<section class="bg-black callOut videoFeed hidden sm:block">
    <div class="px-4 md:max-w-expBody justify-between mx-auto py-16">
        <div class="flex -mx-4">
            <!-- Column -->
            <div class="w-full lg:w-6/12 px-4">
                <h3 class="text-bwhite text-4xl font-sans font-bold leading-snug mb-2">{{ section.heading }}</h3>
            </div>

            <!-- Video List -->
            <div class="w-full lg:w-6/12 px-4 videosContainer">
                <span class="yt-right"></span>
                <span class="yt-left"></span>
                <div class="videoSlider absolute">
                    <!-- Start Repeater -->
                    {% for item in section.videos %}
                    <a href="" yt-movie="{{ item.videoId }}" class="ytMovie">
                        <span class="ytPlay"></span>
                        <span class="ytBar"></span>
                        <img src="https://img.youtube.com/vi/{{ item.videoId }}/hqdefault.jpg" />
                    </a>
                    {% endfor %}
                    <!-- End Repeater -->
                </div>
            </div>


        </div>
        <div class="dr-container movie h-0" style="
            max-height: 720px;
            max-width: 1280px;
            ">
        </div>
    </div>
</section>
<!-- END Video Feed -->

<script type="text/javascript">
    var ytMovieContainer = document.getElementsByClassName('videoFeed');
    var ytMovie = document.getElementsByClassName('ytMovie');
    var movie = false;

    $(window).on('load', function() {
        var $bl = $(".videosContainer"),
            $th = $(".videoSlider"),
            blW = $bl.outerWidth(),
            blSW = $bl[0].scrollWidth,
            wDiff = (blSW / blW) - 1,  // widths difference ratio
            mPadd = 60,  // Mousemove Padding
            damp = 20,  // Mousemove response softness
            mX = 0,   // Real mouse position
            mX2 = 0,   // Modified mouse position
            posX = 0,
            mmAA = blW - (mPadd * 2), // The mousemove available area
            mmAAr = (blW / mmAA);    // get available mousemove difference ratio

        $bl.mousemove(function (e) {
            mX = e.pageX - this.offsetLeft;
            mX2 = Math.min(Math.max(0, mX - mPadd), mmAA) * mmAAr;
        });

        setInterval(function () {
            posX += (mX2 - posX) / damp; // zeno's paradox equation "catching delay"  
            $th.css({ left: -posX * wDiff });
        }, 10);

    });

    for (var i = 0; i < ytMovie.length; i++) {
        ytMovie[i].addEventListener("click", function (event) {
            event.preventDefault();

            var el = document.getElementById('selectedMovie');
            if (el) {
                el.remove();
            }
            else {
                ytMovieContainer[0].classList.toggle('expand');
            }
            var movie = this.getAttribute('yt-movie');

            var autoYoutube = '<iframe width="100%" height="100%" src="https://www.youtube.com/embed/' + movie + '?rel=0&amp;showinfo=0&autoplay=1" frameborder="0" allowfullscreen id="selectedMovie"></iframe>';
            // if (!movie){
            $(".dr-container").removeClass('h-0').addClass('h-screen mt-8');
            document.getElementsByClassName('dr-container movie')[0].insertAdjacentHTML('afterbegin', autoYoutube);
            // };
            ytMovieContainer[0].scrollIntoView({ block: "center" });
        });
    }
</script>